---
id: T-004-04
story: S-004
title: frame-rendering-loop
type: task
status: open
priority: high
phase: ready
depends_on: [T-004-03]
blocks: [T-005-01]
---

## Context

Implement the frame rendering loop that iterates through the timeline at the target FPS and renders each frame to a PNG file on disk.

Given a built scene (M with a recorded timeline), the renderer:
1. Computes total frame count from timeline duration and FPS
2. For each frame: computes the timestamp, builds a FrameState, sends it through the Chromium bridge, saves the resulting PNG
3. Outputs numbered files: `frame_000000.png`, `frame_000001.png`, etc.
4. Reports progress (frame N of M)

This is the "render to image sequence" step. FFmpeg encoding happens in S-005.

Files: moron-core/src/renderer.rs (replace stub)

## Acceptance Criteria

- Renders a scene's timeline to numbered PNG files in an output directory
- Correct frame count based on timeline duration and FPS
- Each frame reflects the visual state at that timestamp
- Progress reporting (frame count, optional callback)
- Handles empty timelines gracefully
- `cargo check` passes

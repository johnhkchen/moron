---
id: T-010-03
story: S-010
title: concurrent-frame-capture
type: task
status: open
priority: high
phase: ready
depends_on: [T-010-01]
blocks: [T-010-04]
---

## Context

Chrome frame capture is likely the dominant bottleneck: send JSON to page via `evaluate()`, wait for React render, take screenshot, receive PNG bytes. This is I/O-bound and currently sequential (one page, one frame at a time).

chromiumoxide supports multiple pages within a single browser instance. By opening N pages (e.g., 4-8), each pre-loaded with the React app, we can capture N frames concurrently using async tasks. The frames are independent — each receives its own FrameState JSON — so there are no ordering constraints during capture, only during the final PNG write.

## Acceptance Criteria

- ChromiumBridge supports a configurable concurrency level (number of parallel pages)
- Capture loop dispatches frames to available pages using async concurrency (tokio tasks or buffered streams)
- PNG writes maintain correct frame ordering regardless of capture completion order
- Default concurrency = number of CPU cores (capped at 8)
- Render output is byte-identical to sequential rendering (same PNGs)
- Benchmark shows wall-clock improvement proportional to concurrency level

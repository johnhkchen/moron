---
id: T-005-04
story: S-005
title: end-to-end-validation
type: task
status: open
priority: medium
phase: ready
depends_on: [T-005-03]
blocks: []
---

## Context

Write an end-to-end validation test that exercises the complete pipeline: scene → timeline → frames → video. This test ensures the full stack works together and serves as a regression guard.

The test:
1. Constructs an M, builds a demo scene with narration, pacing, techniques
2. Renders frames (can use a mock Chromium bridge or minimal HTML for CI)
3. Encodes to .mp4 via FFmpeg
4. Validates: output file exists, has expected duration, has video+audio streams

For CI environments without Chrome/FFmpeg, the test should be gated behind a feature flag or `#[ignore]` with instructions.

Files: moron-core/tests/e2e.rs (new)

## Acceptance Criteria

- End-to-end test exercises full pipeline
- Validates output .mp4 properties (exists, non-empty, correct duration)
- Gated for CI environments without system dependencies
- Documents how to run the full test locally
- All existing tests continue to pass

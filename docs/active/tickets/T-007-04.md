---
id: T-007-04
story: S-007
title: visual-regression-tests
type: task
status: open
priority: medium
phase: ready
depends_on: [T-007-02, T-007-03]
blocks: []
---

## Context

Implement visual regression testing for template output. Render known FrameStates through the pipeline, capture PNG screenshots, and compare against baseline images.

The tests:
1. Render a title card frame, verify PNG output matches baseline
2. Render a metrics frame, verify layout
3. Render a steps frame, verify stagger visual state
4. Render with two different themes, verify visual difference

Baselines are committed PNG files. Tests compare pixel output against baselines with a tolerance threshold (allow minor anti-aliasing differences).

For CI without Chrome, tests are gated behind #[ignore].

Files: moron-core/tests/visual.rs (new), moron-core/tests/baselines/ (new directory for reference PNGs)

## Acceptance Criteria

- Visual regression test framework with baseline comparison
- Tests for title, metric, and steps element types
- Theme switching test
- Pixel comparison with configurable tolerance
- Baselines committed to repo
- Gated for CI without Chrome
- All existing tests continue to pass

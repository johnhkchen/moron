---
id: T-004-03
story: S-004
title: chromium-bridge
type: task
status: done
priority: high
phase: done
depends_on: [T-004-01, T-004-02]
blocks: [T-004-04]
---

## Context

Implement the headless Chromium bridge in moron-core. This connects Rust to the React rendering layer via Chrome DevTools Protocol (CDP).

The bridge:
1. Launches headless Chromium (or connects to an existing instance)
2. Loads the React app (served locally or from a built HTML file)
3. For each frame: injects FrameState as JSON into the page, triggers a React re-render, captures a screenshot as a pixel buffer (PNG bytes)

Use the `chromiumoxide` crate (already in Cargo.toml as a commented-out dependency) for CDP communication. The bridge should be async (tokio).

Files: moron-core/src/chromium.rs (replace stub), moron-core/Cargo.toml (uncomment chromiumoxide)

## Acceptance Criteria

- Can launch headless Chrome and navigate to a local HTML page
- Can inject JSON props and capture a screenshot
- Returns PNG bytes or pixel buffer for a single frame
- Handles Chrome process lifecycle (start, use, shutdown)
- Error handling for Chrome not found, page load failures
- Integration test: render a simple FrameState to PNG, verify non-empty output
